define(["app"],function(sampleApp){sampleApp.register.controller("touchAPI",function($scope){var ha=this;ha.touchConfigObj={droplist:["left1","left2","left3","right1","right2","right3","r4c1","r4c2","r4c3","r4c4","r4c5","r4c6"],touchFunction:"onTouchFunction",localScope:"ha"},ha.dragConfigObj={dragFunction:"onDragFunction",localScope:"ha"},ha.dropConfigObj={dropFunction:"onDropFunction",localScope:"ha"},ha.onTouchFunction=function(scope,element,attrs){var attrsobj=angular.fromJson(attrs.touchableItem),dropList=attrsobj.droplist;element.on("touchstart",function(event){event.preventDefault(),event.stopPropagation();var touchedElementId=event,touchedElementText=touchedElementId.currentTarget.childNodes[0].nodeValue,sourceContainerRow=event.target.parentElement.dataset.row;"homeRow"!=sourceContainerRow&&$("#center"+sourceContainerRow).attr("class","box--noresult"),$("body").append("<span id='ghostDragElement' class='ghostdrag'>"+touchedElementText+"</span>")}),element.on("touchmove",function(event){event.preventDefault(),event.stopPropagation();var xPos=event.originalEvent.changedTouches[0].pageX,yPos=event.originalEvent.changedTouches[0].pageY;$("#ghostDragElement").offset({top:yPos-25,left:xPos-35}),$("#ghostDragElement").addClass("ghostdrag--moving")}),element.on("touchend",function(event){$("#ghostDragElement").remove(),event.preventDefault(),event.stopPropagation();var sourceContainer=(event.target.id,event.target.parentElement),sourceContainerId=event.target.parentElement.id,sourceContainerRow=sourceContainer.dataset.row,xPos=event.originalEvent.changedTouches[0].clientX,yPos=event.originalEvent.changedTouches[0].clientY,destinationContainer=document.elementFromPoint(xPos,yPos),destinationContainerRow=destinationContainer.dataset.row,destinationContainerId=""!=destinationContainer.id?destinationContainer.id:"noId";-1!=dropList.indexOf(destinationContainerId)&&($("#"+destinationContainerId).html(event.target),$("#"+destinationContainerId).removeClass("box--empty"),$("#"+destinationContainerId).addClass("box"),$("#"+sourceContainerId).removeClass("box"),$("#"+sourceContainerId).addClass("box--empty"));var matchRow=-1!=dropList.indexOf(destinationContainerId)?destinationContainerRow:sourceContainerRow,left=$("#left"+matchRow+" span:first-of-type").attr("data-match"),right=$("#right"+matchRow+" span:first-of-type").attr("data-match");void 0!=left&&void 0!=right&&(left==right?$("#center"+matchRow).attr("class","box--match"):left!=right&&$("#center"+matchRow).attr("class","box--mismatch"))})},ha.onDragFunction=function(scope,element,attrs){element.on("dragstart",function(event){event.originalEvent.dataTransfer.effectAllowed="move";var sourceContainerId=event.target.parentElement.id,sourceContainerRow=event.target.parentElement.dataset.row;event.originalEvent.dataTransfer.setData("text",event.target.id),"homeRow"!=sourceContainerRow&&$("#center"+sourceContainerRow).attr("class","box--noresult"),$("#"+sourceContainerId).removeClass("box"),$("#"+sourceContainerId).addClass("box--empty")}),element.on("dragend",function(event){event.preventDefault();var destinationContainerId=event.target.parentElement.id,destinationContainerRow=event.target.parentElement.dataset.row;$("#"+destinationContainerId).removeClass("box--empty"),$("#"+destinationContainerId).addClass("box");var left=$("#left"+destinationContainerRow+" span:first-of-type").attr("data-match"),right=$("#right"+destinationContainerRow+" span:first-of-type").attr("data-match");void 0!=left&&void 0!=right&&(left==right?$("#center"+destinationContainerRow).attr("class","box--match"):left!=right&&$("#center"+destinationContainerRow).attr("class","box--mismatch"))})},ha.onDropFunction=function(scope,element,attrs){element.on("drop",function(event){event.preventDefault();var draggableElement=event.target.draggable,data=event.originalEvent.dataTransfer.getData("text"),destinationContainerId=event.target.id,destinationContainerChild=$("#"+destinationContainerId+" span:first-of-type").attr("id");destinationContainerChild||draggableElement||event.target.appendChild($("#"+data)[0])}),element.on("dragover",function(event){event.preventDefault(),event.originalEvent.dataTransfer.dropEffect="move"})},console.log("-----ha Controller Scope-----"),console.log(ha)})});
//# sourceMappingURL=../maps/controllers/touchAPIController.js.map
