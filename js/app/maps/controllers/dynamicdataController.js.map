{"version":3,"sources":["controllers/dynamicdataController-src.js"],"names":["define","sampleApp","register","controller","$scope","$http","$window","srcCollection","dd","this","$on","newDataItem","name","rating","reverse","selectedOrder","lastDisplayTarget","dataLoader","arg","sqlTableName","tableLoaded","get","then","response","dataList","data","records","angular","forEach","value","key","collection","newRecord","dataPoster","action","editState","undefined","replace","dataString","JSON","stringify","method","url","headers","Content-Type","success","rdata","status","config","PostDataResponse","temp","push","ID","parseInt","dataBoxResize","index","indexOf","splice","error","header","ResponseDetails","orderController","cancelAction","recordID","setEditState","copy","myForm","$setPristine","$setUntouched","dataBox","containerBox","offset","dataBoxHeight","element","prop","css","setForm","form","console","log"],"mappings":"AAEAA,QAAS,OAAQ,SAASC,WAE1BA,UAAUC,SAASC,WAAW,cAAc,SAASC,OAAQC,MAAOC,QAASC,eAC5E,GAAIC,IAAKC,IAETL,QAAOM,IAAI,qBAAsB,WAChCF,GAAGG,aACFC,KAAO,GACPC,OAAS,IAEVL,GAAGM,QAAU,GACbN,GAAGO,cAAgB,GACnBP,GAAGQ,kBAAoB,KAIxBR,GAAGS,WAAa,SAASC,KACxBV,GAAGW,aAAeD,IAClBV,GAAGY,aAAc,EACjBf,MAAMgB,IAAI,0BAA0BH,KAAKI,KAAK,SAASC,UACtDf,GAAGgB,SAAWD,SAASE,KAAKC,QAC5BC,QAAQC,QAAQpB,GAAGgB,SAAU,SAASK,MAAOC,KAC3CtB,GAAGgB,SAASM,KAAKC,WAAab,MAEhCV,GAAGwB,eAKLxB,GAAGyB,WAAa,SAASR,KAAKS,QAC7BT,KAAKU,UAAYC,OACjBX,KAAKb,KAAQa,KAAKb,KAAKyB,QAAQ,kBAAmB,IAClDZ,KAAKS,OAASA,OACdI,WAAa,QAAQC,KAAKC,UAAUf,MACpCpB,OACCoC,OAAS,OACTC,IAAM,iBACNjB,KAAMa,WACNK,SAAWC,eAAgB,uCAE3BC,QAAQ,SAAUC,MAAOC,OAAQJ,QAASK,QAE3C,GADAxC,GAAGyC,iBAAmBH,MACR,UAAVZ,OAAoB,CACxB,GAAIgB,MAAO1C,GAAGO,aACdP,IAAGO,cAAgB,GACnBP,GAAGgB,SAAS2B,MACXC,GAAKN,MACLlC,KAAOa,KAAKb,KACZC,OAASwC,SAAS5B,KAAKZ,QACvBkB,WAAaN,KAAKM,aAEnBvB,GAAGO,cAAgBmC,KACnB1C,GAAG8C,cAAc,2BAA2B,qBAAqB,IAEjE,GAAc,UAAVpB,OAAoB,CACvB,GAAIqB,OAAQ/C,GAAGgB,SAASgC,QAAQ/B,KAChCjB,IAAGgB,SAASiC,OAAOF,MAAO,GAC1B/C,GAAG8C,cAAc,2BAA2B,qBAAqB,QAGjEI,MAAM,SAAUZ,MAAOC,OAAQY,OAAQX,QACvCxC,GAAGoD,gBAAkBd,SAKvBtC,GAAGqD,gBAAkB,SAAS3C,KAC7BV,GAAGM,QAAWN,GAAGO,gBAAkBG,KAAQV,GAAGM,SAAU,EACxDN,GAAGO,cAAgBG,KAIpBV,GAAGsD,aAAe,SAASrC,MAC1B,GAAIsC,UAAWvD,GAAGgB,SAASgC,QAAQ/B,KACnCjB,IAAGgB,SAASuC,UAAUnD,KAAOa,KAAKU,UAAUvB,KAC5CJ,GAAGgB,SAASuC,UAAUlD,OAASY,KAAKU,UAAUtB,OAC9CY,KAAKU,UAAYC,QAIlB5B,GAAGwD,aAAe,SAASvC,MAC1BA,KAAKU,UAAYR,QAAQsC,KAAKxC,OAI/BjB,GAAGwB,UAAY,WACdxB,GAAGG,aACFC,KAAO,GACPC,OAAS,GACTkB,WAAavB,GAAGW,cAEjBX,GAAG0D,OAAOC,eACV3D,GAAG0D,OAAOE,iBAIX5D,GAAG8C,cAAgB,SAASe,QAASC,aAAcC,QAClD,GAAIA,QAAWA,OAAcA,OAAJ,EACrBC,cAAgB7C,QAAQ8C,QAAQ,IAAIJ,SAASK,KAAK,gBAAgBH,MACtE5C,SAAQ8C,QAAQ,IAAIH,cAAcK,IAAI,SAASH,gBAGhDhE,GAAGoE,QAAU,SAAUC,MACtBrE,GAAG0D,OAASW,MAEbC,QAAQC,IAAI,iCACZD,QAAQC,IAAIvE","file":"controllers/dynamicdataController.js","sourcesContent":["//Dynamic Data Controller\n\ndefine (['app'], function(sampleApp){\n\nsampleApp.register.controller('dynamicdata',function($scope, $http, $window, srcCollection){\n\tvar dd = this;\n\t\n\t$scope.$on('$viewContentLoaded', function() {\n\t\tdd.newDataItem = {\n\t\t\tname : '',\n\t\t\trating : ''\n\t\t}\n\t\tdd.reverse = '';\n\t\tdd.selectedOrder = '';\n\t\tdd.lastDisplayTarget = '';\n\t })\n\t \n\t//Load Data\n\tdd.dataLoader = function(arg)\t{\n\t\tdd.sqlTableName = arg;\n\t\tdd.tableLoaded = true;\n\t\t$http.get(\"./dataList.php?dataSet=\"+arg).then(function(response) {\n\t\t\tdd.dataList = response.data.records;\n\t\t\tangular.forEach(dd.dataList, function(value, key) {\n\t\t\t  dd.dataList[key].collection = arg;\n\t\t\t});\n\t\t\tdd.newRecord();\n\t\t});\n\t}\n\t\n\t//Post Data\n\tdd.dataPoster = function(data,action)\t{\n\t\tdata.editState = undefined;\n\t\tdata.name = (data.name.replace(/[^a-zA-Z0-9\\s]/g, \"\")); \n\t\tdata.action = action;\n\t\tdataString = 'data='+JSON.stringify(data);\n\t\t$http({\n\t\t\tmethod : 'POST',\n\t\t\turl : './dataList.php',\n\t\t\tdata: dataString,\n\t\t\theaders : {'Content-Type': 'application/x-www-form-urlencoded'}  \n\t\t})\n\t\t.success(function (rdata, status, headers, config) {\n\t\tdd.PostDataResponse = rdata;\t\n\t\tif (action == \"insert\")\t{\n\t\tvar temp = dd.selectedOrder\n\t\tdd.selectedOrder = '';\n\t\tdd.dataList.push({\n\t\t\t'ID':rdata,\n\t\t\t'name':data.name,\n\t\t\t'rating':parseInt(data.rating),\n\t\t\t'collection':data.collection\n\t\t});\n\t\tdd.selectedOrder = temp;\n\t\tdd.dataBoxResize('table-box--display-inner','table-box--display',(40));\n\t\t}\n\t\tif (action == \"remove\")\t{\n\t\t\tvar index = dd.dataList.indexOf(data);\n\t\t\tdd.dataList.splice(index, 1);\n\t\t\tdd.dataBoxResize('table-box--display-inner','table-box--display',(-32));\n\t\t}\n\t\t})\n\t\t.error(function (rdata, status, header, config) {\n\t\t\tdd.ResponseDetails = rdata;\n\t\t});\n\t}\n\t \n\t//Order Data\n\tdd.orderController = function(arg)\t{\n\t\tdd.reverse = (dd.selectedOrder === arg) ? !dd.reverse : false;\n\t\tdd.selectedOrder = arg;\n\t}\n\t\n\t//Cancell Action\n\tdd.cancelAction = function(data)\t{\n\t\tvar recordID = dd.dataList.indexOf(data);\n\t\tdd.dataList[recordID].name = data.editState.name;\n\t\tdd.dataList[recordID].rating = data.editState.rating;\n\t\tdata.editState = undefined;\n\t}\n\t\n\t//Set Edit State\n\tdd.setEditState = function(data)\t{\n\t\tdata.editState = angular.copy(data);\n\t}\n\t\n\t//New Record\n\tdd.newRecord = function()\t{\n\t\tdd.newDataItem = {\n\t\t\tname : '',\n\t\t\trating : '',\n\t\t\tcollection : dd.sqlTableName\n\t\t}\n\t\tdd.myForm.$setPristine();\n\t\tdd.myForm.$setUntouched();\n\t}\n\t\n\t//Resize Data Box\n\tdd.dataBoxResize = function(dataBox, containerBox, offset)\t{\n\t\tvar offset = (!offset) ? 5 : offset;\n\t\tvar dataBoxHeight = angular.element('#'+dataBox).prop('offsetHeight')+offset\n\t\tangular.element('#'+containerBox).css('height',dataBoxHeight);\n\t}\n\t\n\tdd.setForm = function (form) {\n\t\tdd.myForm = form;\n\t}\n\tconsole.log(\"-----dd Controller Scope-----\");\n\tconsole.log(dd);\n})\n\n});"],"sourceRoot":"/source/"}